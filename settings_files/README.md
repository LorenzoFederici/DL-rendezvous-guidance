# How to prepare a correct settings file

The settings file contains a number of parameters that the program needs to know in order to understand what kind of mission to simulate, what RL/BC algorithm to use and with what hyper-parameter values, and so on.
The parameters must be organized in two columns, the first with the names of the parameters, and the second with their values. The order in which they are written in the file is not important.

## RL settings file

The list of parameters to include in the RL settings file is the following:

|        Name        |      Type      |                                  Meaning                                 |                                                                         Value                                                                        |
|:------------------:|:--------------:|:------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------:|
|    `load_model`    |      bool      |                 Do you want to train a pre-trained model?                |                                                                  `1` (yes), `0` (no)                                                                 |
|     `env_name`     |     string     |                          Name of the environment                         |                                                                    `rendezvous-v1`                                                                   |
|   `mission_name`   |     string     |       Name of the mission file (without .dat) in folder `missions/`      |                                                                     The file name                                                                    |
|       `Dvmax`      |      float     |                   Maximum Dv with chaser engine (km/s)                   |                                                                   A positive float                                                                   |
|       `omega`      |      float     |                  Mean motion of the target body (rad/s)                  |                                                                   A positive float                                                                   |
|       `rKOZ`       |      float     |                     Radius of the keep out zone (km)                     |                                                                   A positive float                                                                   |
|     `beta_cone`    |      float     |                    Visibility cone semi-aperture (deg)                   |                                                                   A positive float                                                                   |
|     `obs_type`     |      bool      |               Parameters of the chaser used as observations              |                                                        `0` (r, v, t), `1` (r, v, t and action)                                                       |
|    `random_obs`    |      bool      |                      Are the observations uncertain?                     |                                                                  `0` (no), `1` (yes)                                                                 |
|     `randomIC`     |      bool      |                   Are the initial conditions scattered?                  |                                                                  `0` (no), `1` (yes)                                                                 |
|    `stochastic`    |      bool      |                      Is the environment stochastic?                      |                                                                  `0` (no), `1` (yes)                                                                 |
|    `termination`   |      bool      |     Terminate the current episode when path constraints are violated     |                                                                  `0` (no), `1` (yes)                                                                 |
|      `NSTEPS`      |       int      |                 Number of time-steps per training episode                |                                                                   An integer number                                                                  |
|   `eps_schedule`   | list of floats |       The schedule used for the constraint satisfaction tolerance        |                                                                 A list of floats << 1                                                                |
|    `lambda_term`   |      float     |     Weight of terminal constraint violation term in the reward signal    |                                                                        A float                                                                       |
|    `lambda_los`    |      float     |       Weight of path constraint violation term in the reward signal      |                                                                        A float                                                                       |
|      `dr0_max`     | list of floats |          Maximum scattering of initial position components (km)          |                                                                   A list of floats                                                                   |
|      `dv0_max`     | list of floats |          Maximum scattering of initial velocity components (km)          |                                                                   A list of floats                                                                   |
|      `sigma_r`     |      float     |           Standard deviation of chaser (observed) position (km)          |                                                                        A float                                                                       |
|      `sigma_v`     |      float     |           Standard deviation of chaser (observed) velocity (km)          |                                                                        A float                                                                       |
|    `sigma_u_rot`   |      float     | Standard deviation of Euler angles defining thrust/DV misalignment (rad) |                                                                    A float in 0,pi                                                                   |
|   `sigma_u_norm`   |      float     |      Standard deviation of the error on thrust/DV norm (percentage)      |                                                                    A float in 0,1                                                                    |
|        `MTE`       |      bool      |                             Does a MTE occur?                            |                                                                  `0` (no), `1` (yes)                                                                 |
|      `pr_MTE`      |      float     |      Probability of having a new single-step MTE after the last one      |                                                                    A float in 0,1                                                                    |
|      `max_MTE`     |       int      |       Maximum number of consecutive single-step MTEs in one episode      |                                                               An integer greater than 1                                                              |
|      `acc_max`     | list of floats |   Maximum value of the components of a perturbing acceleration (km/s^2)  |                                                                   A list of floats                                                                   |
|      `num_cpu`     |       int      |             Number of parallel environments used for training            |                                                               An integer greater than 1                                                              |
|     `algorithm`    |     string     |                               RL algorithm                               |                                                      `PPO`, `A2C`, `DDPG`, `SAC`, `TD3`, `TRPO`                                                      |
| `learning_rate_in` |      float     |                    Initial value of the learning rate                    |                                                                   A positive float                                                                   |
|   `clip_range_in`  |      float     |              Initial value of the clip range (only for PPO)              |                                                                   A positive float                                                                   |
|   `learning_rate`  |     string     |                           Type of learning rate                          |                                                          `lin` (linear), `const` (constant)                                                          |
|    `clip_range`    |     string     |                            Type of clip range                            |                                                          `lin` (linear), `const` (constant)                                                          |
|     `ent_coef`     |      float     |         Coefficient of the entropy term in the performance index         |                                                                   A positive float                                                                   |
|       `gamma`      |      float     |                    Discount factor for future rewards                    |                                                                    A float in 0,1                                                                    |
|        `lam`       |      float     |                Generalized Advantage Estimator coefficient               |                                                                    A float in 0,1                                                                    |
|    `noptepochs`    |       int      |          Number of stochastic gradient ascent epochs per update          |                                                                      An integer                                                                      |
|   `nminibatches`   |       int      |                      Number of episodes per rollout                      |                                                                      An integer                                                                      |
|      `policy`      |     string     |                     Actor-Critic Deep Neural Network                     | `MlpPolicy`, `MlpLstmPolicy`, `LstmPolicy`, `CustomPolicy_2x32`, `CustomPolicy_3x64`, `CustomPolicy_4x128`, `CustomLSTMPolicy`, `CustomPolicy_3_var` |
|       `niter`      |       int      |                      Total number of training steps                      |                                                                   A (huge) integer                                                                   |


## BC settings file

The list of parameters to include in the BC settings file is the following:

|      Name      |      Type      |                                                        Meaning                                                        |                                                                         Value                                                                        |
|:--------------:|:--------------:|:---------------------------------------------------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------:|
|   `env_name`   |     string     |                                                Name of the environment                                                |                                                                    `rendezvous-v1`                                                                   |
| `mission_name` |     string     |                             Name of the mission file (without .dat) in folder `missions/`                             |                                                                     The file name                                                                    |
|     `Dvmax`    |      float     |                                          Maximum Dv with chaser engine (km/s)                                         |                                                                   A positive float                                                                   |
|     `omega`    |      float     |                                         Mean motion of the target body (rad/s)                                        |                                                                   A positive float                                                                   |
|     `rKOZ`     |      float     |                                            Radius of the keep out zone (km)                                           |                                                                   A positive float                                                                   |
|   `beta_cone`  |      float     |                                          Visibility cone semi-aperture (deg)                                          |                                                                   A positive float                                                                   |
|   `obs_type`   |      bool      |                                     Parameters of the chaser used as observations                                     |                                                        `0` (r, v, t), `1` (r, v, t and action)                                                       |
|  `random_obs`  |      bool      |                                            Are the observations uncertain?                                            |                                                                  `0` (no), `1` (yes)                                                                 |
|   `randomIC`   |      bool      |                                         Are the initial conditions scattered?                                         |                                                                  `0` (no), `1` (yes)                                                                 |
|  `stochastic`  |      bool      |                                             Is the environment stochastic?                                            |                                                                  `0` (no), `1` (yes)                                                                 |
|  `termination` |      bool      |                            Terminate the current episode when path constraints are violated                           |                                                                  `0` (no), `1` (yes)                                                                 |
|    `NSTEPS`    |       int      |                                       Number of time-steps per training episode                                       |                                                                   An integer number                                                                  |
| `eps_schedule` | list of floats |                              The schedule used for the constraint satisfaction tolerance                              |                                                                 A list of floats << 1                                                                |
|  `lambda_term` |      float     |                           Weight of terminal constraint violation term in the reward signal                           |                                                                        A float                                                                       |
|  `lambda_los`  |      float     |                             Weight of path constraint violation term in the reward signal                             |                                                                        A float                                                                       |
|    `dr0_max`   | list of floats |                                 Maximum scattering of initial position components (km)                                |                                                                   A list of floats                                                                   |
|    `dv0_max`   | list of floats |                                 Maximum scattering of initial velocity components (km)                                |                                                                   A list of floats                                                                   |
|    `sigma_r`   |      float     |                                 Standard deviation of chaser (observed) position (km)                                 |                                                                        A float                                                                       |
|    `sigma_v`   |      float     |                                 Standard deviation of chaser (observed) velocity (km)                                 |                                                                        A float                                                                       |
|  `sigma_u_rot` |      float     |                        Standard deviation of Euler angles defining thrust/DV misalignment (rad)                       |                                                                    A float in 0,pi                                                                   |
| `sigma_u_norm` |      float     |                             Standard deviation of the error on thrust/DV norm (percentage)                            |                                                                    A float in 0,1                                                                    |
|      `MTE`     |      bool      |                                                   Does a MTE occur?                                                   |                                                                  `0` (no), `1` (yes)                                                                 |
|    `pr_MTE`    |      float     |                             Probability of having a new single-step MTE after the last one                            |                                                                    A float in 0,1                                                                    |
|    `max_MTE`   |       int      |                             Maximum number of consecutive single-step MTEs in one episode                             |                                                               An integer greater than 1                                                              |
|    `acc_max`   | list of floats |                         Maximum value of the components of a perturbing acceleration (km/s^2)                         |                                                                   A list of floats                                                                   |
|  `expert_name` |     string     | Name of the .npz archive (without .npz), in folder `expert_traj/`, containing the expert trajectories                 |                                                                     The file name                                                                    |
| `n_batches_BC` |       int      |                          Number of expert trajectories per stochastic gradient descent update                         |                                                                  A positive integer                                                                  |
|  `traj_limit`  |       int      |                                 Number of expert trajectories to use (if -1, load all)                                |                                                           Either a positive integer, or -1                                                           |
|  `train_frac`  |      float     | The fraction of expert trajectories to include in the training set (the other will be included in the validation set) |                                                                    A float in 0,1                                                                    |
|   `n_epochs`   |       int      |                                        Number of iterations on the training set                                       |                                                                      An integer                                                                      |
|      `lr`      |      float     |                                   Learning rate used in stochastic gradient descent                                   |                                                               A positive (small) float                                                               |
|   `adam_eps`   |      float     |                                        The epsilon value for the ADAM optimizer                                       |                                                               A positive (small) float                                                               |
|    `policy`    |     string     |                                            Actor-Critic Deep Neural Network                                           | `MlpPolicy`, `MlpLstmPolicy`, `LstmPolicy`, `CustomPolicy_2x32`, `CustomPolicy_3x64`, `CustomPolicy_4x128`, `CustomLSTMPolicy`, `CustomPolicy_3_var` |
|  `RL_training` |      bool      |                                        Is the policy network re-trained by RL?                                        |                                                                  `0` (no), `1` (yes)                                                                 |